atrium_lights_on_reasoned:
  alias: Atrium Lights ON (reasoned)
  mode: restart
  fields:
    reason:
      description: Why the atrium lights were turned on
      required: true
  sequence:
  - action: input_text.set_value
    data:
      entity_id: input_text.atrium_last_light_reason
      value: '{{ reason }}'
  - action: light.turn_on
    target:
      entity_id: light.wall_dimmer_1
  - delay: 1
  - action: media_player.volume_set
    target:
      entity_id: media_player.family_room
    data:
      volume_level: 0.45
  - action: tts.speak
    target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.family_room
      message: Atrium lights on — {{ reason }}
atrium_lights_off_reasoned:
  alias: Atrium Lights OFF (reasoned)
  mode: restart
  fields:
    reason:
      description: Why the lights were turned off
      example: No motion (PIR cleared)
  sequence:
  - action: input_text.set_value
    data:
      entity_id: input_text.atrium_last_light_reason
      value: '{{ reason | default(''unknown'') }}'
  - action: light.turn_off
    target:
      entity_id: light.wall_dimmer_1
  - delay: 1
  - action: media_player.volume_set
    target:
      entity_id: media_player.family_room
    data:
      volume_level: 0.45
  - action: tts.speak
    target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.family_room
      message: "Atrium lights off — {{\n  states('input_text.atrium_last_light_reason')\n
        \ | default('unknown reason', true)\n}}"
test_play_soundscape:
  alias: TEST – Play Soundscape
  mode: single
  sequence:
  - target:
      entity_id: media_player.family_room
    data:
      media_content_id: /local/soundscapes/1.wav
      media_content_type: music
    action: media_player.play_media
  description: ''
test_play_soundscape_url:
  alias: TEST – Play Soundscape - url
  mode: single
  sequence:
  - action: media_player.volume_set
    target:
      entity_id: media_player.family_room
    data:
      volume_level: 0.5
  - action: media_player.play_media
    target:
      entity_id: media_player.family_room
    data:
      media_content_id: http://homeassistant.local:8123/local/soundscapes/1.wav
      media_content_type: audio/wav
  description: ''
test_play_soundscape_simplified:
  alias: TEST – Play Soundscape - simplified
  mode: single
  sequence:
  - action: media_player.play_media
    target:
      entity_id: media_player.family_room
    data:
      media:
        media_content_id: /local/soundscapes/1.wav
        media_content_type: music
  description: ''
