- id: '1767258109835'
  alias: Phone 1 - TTS Alert - power / charger state changed
  description: Speak when Phone 1 is plugged in or unplugged
  mode: single

  trigger:
    - platform: state
      entity_id:
        - sensor.phone_1_battery_state
        - sensor.phone_1_charger_type

  action:
    - choose:

        # ðŸ”Œ Plugged in (USB detected OR battery charging)
        - conditions:
            - condition: template
              value_template: >
                {{ states('sensor.phone_1_charger_type') != 'none'
                   or states('sensor.phone_1_battery_state') == 'charging' }}
          sequence:
            - action: tts.speak
              target:
                entity_id: tts.google_translate_en_com
              data:
                media_player_entity_id: media_player.amp_1
                message: Power restored. Phone 1 is now charging.

        # ðŸ”‹ Unplugged (charger removed AND not charging)
        - conditions:
            - condition: template
              value_template: >
                {{ states('sensor.phone_1_charger_type') == 'none'
                   and states('sensor.phone_1_battery_state') != 'charging' }}
          sequence:
            - action: tts.speak
              target:
                entity_id: tts.google_translate_en_com
              data:
                media_player_entity_id: media_player.amp_1
                message: Warning. Phone 1 has been unplugged.
