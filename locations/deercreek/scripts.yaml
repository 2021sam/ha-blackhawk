atrium_lights_on_reasoned:
  alias: Atrium Lights ON (reasoned)
  mode: restart
  fields:
    reason:
      description: Why the atrium lights were turned on
      required: true
  sequence:
  - action: input_text.set_value
    data:
      entity_id: input_text.atrium_last_light_reason
      value: '{{ reason }}'
  - action: light.turn_on
    target:
      entity_id: light.wall_dimmer_1
  - delay: 1
  - action: media_player.volume_set
    target:
      entity_id: media_player.amp_1
    data:
      volume_level: 0.45
  - action: tts.speak
    target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.amp_1
      message: Atrium lights on — {{ reason }}
atrium_lights_off_reasoned:
  alias: Atrium Lights OFF (reasoned)
  mode: restart
  fields:
    reason:
      description: Why the atrium lights were turned off
      required: true
  sequence:
  - action: input_text.set_value
    data:
      entity_id: input_text.atrium_last_light_reason
      value: '{{ reason }}'
  - action: light.turn_off
    target:
      entity_id: light.wall_dimmer_1
  - delay: 1
  - action: media_player.volume_set
    target:
      entity_id: media_player.amp_1
    data:
      volume_level: 0.45
  - action: media_player.play_media
    target:
      entity_id: media_player.amp_1
    data:
      media:
        media_content_id: /local/soundscapes/1.wav
        media_content_type: music
test_play_soundscape:
  alias: TEST – Play Soundscape
  mode: single
  sequence:
  - target:
      entity_id: media_player.amp_1
    data:
      media:
        media_content_id: /local/soundscapes/1.wav
        media_content_type: music
        metadata: {}
    action: media_player.play_media
  description: ''
test_play_soundscape_simplified:
  alias: TEST – Play Soundscape - simplified
  mode: single
  sequence:
  - action: media_player.play_media
    target:
      entity_id: media_player.amp_1
    data:
      media:
        media_content_id: /local/soundscapes/1.wav
        media_content_type: music
  description: ''
test_tts_family_room:
  alias: TEST – TTS Family Room
  mode: single
  sequence:
  - target:
      entity_id: media_player.amp_1
    action: media_player.volume_mute
    data:
      is_volume_muted: false
  - target:
      entity_id: media_player.amp_1
    action: media_player.volume_set
    data:
      volume_level: 0.6
  - target:
      entity_id: tts.google_translate_en_com
    action: tts.speak
    data:
      media_player_entity_id: media_player.amp_1
      message: Test. Home Assistant text to speech is working.
  description: ''
reload_automations:
  alias: Reload Automations
  icon: mdi:reload
  sequence:
  - action: automation.reload
  description: ''
speak_last_google_voice_message_2:
  alias: Speak last Google Voice message - 2 - Success
  mode: single
  sequence:
  - variables:
      n: sensor.lm_q710_fgn_last_notification
      msg: '{{ (state_attr(n,''android.text'') or ''No message text found'') | string
        }}'
  - target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.amp_1
      message: '{{ msg }}'
    action: tts.speak
  description: ''
speak_last_google_voice_message_with_sender_3:
  alias: Speak last Google Voice message with sender - 3 - Success
  mode: single
  sequence:
  - variables:
      n: sensor.lm_q710_fgn_last_notification
      who: '{{ (state_attr(n,''android.title'') or ''Message'') | string }}'
      txt: '{{ (state_attr(n,''android.text'') or '''') | string }}'
      msg: '{{ (who ~ '': '' ~ txt) if txt|length > 0 else (who ~ '': (no text)'')
        }}'
  - target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.amp_1
      message: '{{ msg }}'
    action: tts.speak
  description: ''
speak_last_item_from_android_messages_4:
  alias: Speak last item from android.messages - 4 - Success
  mode: single
  sequence:
  - variables:
      n: sensor.lm_q710_fgn_last_notification
      msgs: '{{ state_attr(n,''android.messages'') }}'
      last: '{{ msgs[-1] if msgs is sequence and (msgs|count) > 0 else none }}'
      txt: '{{ (last.text if last is mapping and last.text is defined else state_attr(n,''android.text''))
        | string }}'
  - target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.amp_1
      message: '{{ txt }}'
    action: tts.speak
  description: ''
speak_last_google_voice_message_with_sender_5:
  alias: TEST - Automations solution - Speak Title & Text - 5 - Success
  mode: single
  sequence:
  - variables:
      n: sensor.lm_q710_fgn_last_notification
      who: '{{ (state_attr(n,''android.title'') or ''Message'') | string }}'
      txt: '{{ (state_attr(n,''android.text'') or '''') | string }}'
      msg: '{{ (who ~ '': '' ~ txt) if txt|length > 0 else (who ~ '': (no text)'')
        }}'
  - target:
      entity_id: tts.google_translate_en_com
    data:
      media_player_entity_id: media_player.amp_1
      message: '{{ msg }}'
    action: tts.speak
  description: This solution is used in the Automations