speak_last_google_voice_message_2:
  alias: Speak last Google Voice message - 2 - Success
  mode: single
  sequence:
    - variables:
        n: sensor.lm_q710_fgn_last_notification
        msg: "{{ (state_attr(n,'android.text') or 'No message text found') | string }}"
    - action: tts.speak
      target:
        entity_id: tts.google_translate_en_com
      data:
        media_player_entity_id: media_player.amp_1
        message: "{{ msg }}"

speak_last_google_voice_message_with_sender_3:
  alias: Speak last Google Voice message with sender - 3 - Success
  mode: single
  sequence:
    - variables:
        n: sensor.lm_q710_fgn_last_notification
        who: "{{ (state_attr(n,'android.title') or 'Message') | string }}"
        txt: "{{ (state_attr(n,'android.text') or '') | string }}"
        msg: "{{ (who ~ ': ' ~ txt) if txt|length > 0 else (who ~ ': (no text)') }}"
    - action: tts.speak
      target:
        entity_id: tts.google_translate_en_com
      data:
        media_player_entity_id: media_player.amp_1
        message: "{{ msg }}"

speak_last_item_from_android_messages_4:
  alias: Speak last item from android.messages - 4 - Success
  mode: single
  sequence:
    - variables:
        n: sensor.lm_q710_fgn_last_notification
        msgs: "{{ state_attr(n,'android.messages') }}"
        last: "{{ msgs[-1] if msgs is sequence and (msgs|count) > 0 else none }}"
        txt: >-
          {{ (last.text if last is mapping and last.text is defined else state_attr(n,'android.text')) | string }}
    - action: tts.speak
      target:
        entity_id: tts.google_translate_en_com
      data:
        media_player_entity_id: media_player.amp_1
        message: "{{ txt }}"

speak_last_google_voice_message_with_sender_5:
  alias: TEST - Automations solution - Speak Title & Text - 5 - Success
  mode: single
  sequence:
    - variables:
        n: sensor.lm_q710_fgn_last_notification
        who: "{{ (state_attr(n,'android.title') or 'Message') | string }}"
        txt: "{{ (state_attr(n,'android.text') or '') | string }}"
        msg: "{{ (who ~ ': ' ~ txt) if txt|length > 0 else (who ~ ': (no text)') }}"
    - action: tts.speak
      target:
        entity_id: tts.google_translate_en_com
      data:
        media_player_entity_id: media_player.amp_1
        message: "{{ msg }}"
  description: This solution is used in the Automations
